window.__require=function t(e,o,n){function r(c,p){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var s="function"==typeof __require&&__require;if(!p&&s)return s(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({game:[function(t,e,o){"use strict";cc._RF.push(e,"5cd7cpzAg5KELjsq7oEawXH","game");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,p=i.property,a=t("./number"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.view=null,e.playerColor=[],e.ws=null,e.gameOver=null,e.menu=null,e.history=null,e.players=null,e.index=null,e.Gindex=null,e.leader=null,e}return n(e,t),e.prototype.onLoad=function(){window.Url="140.118.127.143:1234",this.ws=new WebSocket("wss://"+window.Url)},e.prototype.start=function(){for(var t=this,e=0;e<64;e++){for(var o=0;o<64;o++){var n=cc.instantiate(this.prefab);n.getComponent(a.default).ID=64*e+o,this.view.addChild(n),n.setPosition(cc.v2(50*e-1600+25,50*o-1600+25))}this.playerColor.push(this.randomHexColor())}setTimeout(function(){t.ws.send(JSON.stringify({Type:"get.board"}))},500),setTimeout(function(){t.ws.send(JSON.stringify({Type:"get.players"}))},600),this.ws.onmessage=function(e){var o=JSON.parse(e.data);if(o.Client){t.index=o.GID,t.Gindex.string="index:"+t.index;for(var n=0;n<4096;n++){var r=+o.Client[n];t.view.children[n].getComponent(a.default).num!=r&&(t.view.children[n].getComponent(a.default).num=r),-1!=r&&t.view.children[n].getComponent(a.default).up()}}else if(o[0])if(o[0].hasOwnProperty("GID")){if(t.history.string="Last Game\n",t.index){o[t.index-1].Players.sort(function(t,e){return e.Score-t.Score});for(var i=0;i<5;i++)t.history.string+=o[t.index-1].Players[i].Name+"\t\t",t.history.string+=o[t.index-1].Players[i].Score+"\n"}t.history.node.parent.active=!t.history.node.parent.active}else{t.players.string="Alive Player\n";for(i=0;i<o.length;i++)o[i].Alive&&(t.players.string+=o[i].Name+"\n");t.leader.string="Leader:\n",o.sort(function(t,e){return e.Score-t.Score});var c=Math.min(5,o.length);for(i=0;i<c;i++)t.leader.string+=o[i].Name+"\t\t",t.leader.string+=o[i].Score.toString()+"\n";t.players.node.parent.active=!t.players.node.parent.active}else o.Score?(t.ws.send(JSON.stringify({Type:"get.board"})),-1==o.Score&&(t.gameOver.node.active=!0)):o.Msg?o.Code?alert("\u5bc6\u78bc\u8f38\u5165\u932f\u8aa4"):cc.director.loadScene("map"):(o.Pid||o.Code&&!o.hasOwnProperty("Score"))&&(0==o.Code?(t.gameOver.node.active=!1,t.menu.getComponent("menu").hide()):1==o.Code?alert("\u540d\u5b57\u91cd\u8907"):2==o.Code?alert("\u73fe\u5728\u73a9\u5bb6\u5df2\u6eff\u4eba"):3==o.Code?alert("\u904a\u6232\u73a9\u5bb6\u5df2\u6eff\u4eba"):4==o.Code&&alert("\u5df2\u7d93\u5728\u904a\u6232\u4e2d"))}},e.prototype.randomHexColor=function(){return cc.Color.fromHEX(new cc.Color,"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6))},e.prototype.update=function(t){},r([p(cc.Prefab)],e.prototype,"prefab",void 0),r([p(cc.Node)],e.prototype,"view",void 0),r([p],e.prototype,"playerColor",void 0),r([p],e.prototype,"ws",void 0),r([p(cc.Label)],e.prototype,"gameOver",void 0),r([p(cc.Node)],e.prototype,"menu",void 0),r([p(cc.Label)],e.prototype,"history",void 0),r([p(cc.Label)],e.prototype,"players",void 0),r([p],e.prototype,"index",void 0),r([p(cc.Label)],e.prototype,"Gindex",void 0),r([p(cc.Label)],e.prototype,"leader",void 0),e=r([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./number":"number"}],link:[function(t,e,o){"use strict";cc._RF.push(e,"739c5qBzHdEvLRVtg3XynO7","link");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){},e.prototype.link=function(){window.Url=this.node.getComponent(cc.EditBox).string,cc.director.loadScene("map")},e=r([c],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],menu:[function(t,e,o){"use strict";cc._RF.push(e,"d28f9Za1lhD8btEpeB7JOBb","menu");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e.Name=null,e.password=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.hide=function(){this.button.active=!0,this.node.active=!1},e.prototype.show=function(){this.button.active=!1,this.node.active=!0},e.prototype.play=function(){var t={Type:"action.join",Name:this.Name.string};this.node.parent.getComponent("game").ws.send(JSON.stringify(t))},e.prototype.history=function(){this.node.parent.getComponent("game").ws.send(JSON.stringify({Type:"get.history"}))},e.prototype.alive=function(){this.node.parent.getComponent("game").ws.send(JSON.stringify({Type:"get.players"}))},e.prototype.newGame=function(){var t={Type:"system.nextgame",Name:this.password.string};this.node.parent.getComponent("game").ws.send(JSON.stringify(t))},r([p(cc.Node)],e.prototype,"button",void 0),r([p(cc.EditBox)],e.prototype,"Name",void 0),r([p(cc.EditBox)],e.prototype,"password",void 0),e=r([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],number:[function(t,e,o){"use strict";cc._RF.push(e,"32c15HAeR1GtKxl7i+gqYsT","number");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.flag=null,e.num=null,e.ID=0,e}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},e.prototype.onMouseDown=function(t){t.getButton()===cc.Event.EventMouse.BUTTON_LEFT?this.click(!1):this.click(!0)},e.prototype.start=function(){},e.prototype.click=function(t){if(1===this.node.parent.parent.parent.parent.getComponent("game").ws.readyState){var e={Type:"action.click",Index:this.ID,Flag:t};this.node.parent.parent.parent.parent.getComponent("game").ws.send(JSON.stringify(e))}},e.prototype.up=function(){var t=this.num%10;9==t?this.flag.active=!0:this.label.string=t>0?t.toString():0==t?"":"X",this.node.getComponent(cc.Button).normalColor=this.node.parent.parent.parent.parent.getComponent("game").playerColor[Math.floor(this.num/10)],this.node.getComponent(cc.Button).enabled=!1},r([p(cc.Label)],e.prototype,"label",void 0),r([p(cc.Node)],e.prototype,"flag",void 0),r([p],e.prototype,"num",void 0),r([p],e.prototype,"ID",void 0),e=r([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["game","link","menu","number"]);